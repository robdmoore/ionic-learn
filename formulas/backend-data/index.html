<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta charset='utf-8'>
    <title>Formulas | Learn Ionic</title>
    <link href='/css/site.css' rel='stylesheet'>
    <link href='//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.0/animate.min.css' rel='stylesheet'>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44023830-6', 'ionicframework.com');
      ga('send', 'pageview');
    </script>
  </head>
  <body class='full-page no-js'>
    <script>
      document.body.classList.remove('no-js');
    </script>
    <div class='container'>
      <div class='row'>
        <div class='side-nav'>
          <div class='logo'>
            <a href='/'>
              <img alt='Learn Ionic Framework' height='43' src='/img/learn-ionicframework@2x.png' width='194'>
            </a>
          </div>
          <nav>
            <ul>
              <li>
                <a href='/videos/'>
                  <i class='ion-videos'></i>
                  <p>Videos</p>
                </a>
              </li>
              <li>
                <a class='active' href='/formulas/'>
                  <i class='ion-formulas'></i>
                  <p>Formulas</p>
                </a>
              </li>
              <li>
                <a href='/resources/'>
                  <i class='ion-resources'></i>
                  <p>Resources</p>
                </a>
              </li>
            </ul>
            <footer>
              <ul>
                <li>
                  <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_new'>
                    <i class='ion-suggestions'></i>
                    <p>Suggest a Topic</p>
                  </a>
                </li>
                <li>
                  <a href='http://forum.ionicframework.com/' target='_new'>
                    <i class='ion-forum'></i>
                    <p>Forums</p>
                  </a>
                </li>
                <li>
                  <a href='https://github.com/driftyco/ionic' target='_new'>
                    <i class='ion-github'></i>
                    <p>Github</p>
                  </a>
                </li>
                <li>
                  <a href='https://twitter.com/ionicframework' target='_new'>
                    <i class='ion-twitter'></i>
                    <p>Twitter</p>
                  </a>
                </li>
                <li>
                  <a href='https://plus.google.com/+Ionicframework/posts' target='_new'>
                    <i class='ion-googleplus'></i>
                    <p>Plus</p>
                  </a>
                </li>
              </ul>
            </footer>
          </nav>
        </div>
        <div class='main-pane'>
          <div class='content formula'>
            <nav>
              <a class='left' href='/formulas/'>
                <i class='ion-chevron-left'></i>
                <span style='margin-left:-5px;'>All Formulas</span>
              </a>
            </nav>
            <article>
              <header>
                <h1>Integrating a Backend Service with AngularJS</h1>
                <div class='byline'>
                  <img src='/img/authors/max-lynch.png'>
                  <span class='author'>
                    Written by
                    <a href='https://twitter.com/maxlynch' target='_new'>Max Lynch</a>
                  </span>
                  <time></time>
                </div>
              </header>
              <h2 id="backend-services">Backend Services</h2>
              
              <p>What is a mobile app without interesting data? It seems nearly every app we use today is sending and receiving data from a remote location, and letting us share our own data with the world.</p>
              
              <p>Luckily, adding backend functionality to a mobile app is incredibly easy with AngularJS.</p>
              
              <h3 id="http">$http</h3>
              
              <p>Sometimes, all we need to do is make simple, periodic HTTP requests to a remote server. In those cases, the <code>$http</code> Angular service is exactly what we need:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>angular.module(<span class="string"><span class="delimiter">'</span><span class="content">ionicApp</span><span class="delimiter">'</span></span>, [])&#x000A;&#x000A;.controller(<span class="string"><span class="delimiter">'</span><span class="content">MainCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, <span class="predefined">$http</span>) {&#x000A; <span class="predefined">$http</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">https://cors-test.appspot.com/test</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>(resp) {&#x000A;    console.log(<span class="string"><span class="delimiter">'</span><span class="content">Success</span><span class="delimiter">'</span></span>, resp);&#x000A;    <span class="comment">// For JSON responses, resp.data contains the result</span>&#x000A;  }, <span class="keyword">function</span>(err) {&#x000A;    console.error(<span class="string"><span class="delimiter">'</span><span class="content">ERR</span><span class="delimiter">'</span></span>, err);&#x000A;    <span class="comment">// err.status will contain the status code</span>&#x000A;  })&#x000A;})</pre></div>
              </div>
              </div>
              
              <p>We can easily tie this request to our scope and have live updating of a server value:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre><span class="tag">&lt;body</span> <span class="attribute-name">ng-app</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ionicApp</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MainCtrl</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;The weather outside is {{conditions}}&#x000A;<span class="tag">&lt;/body&gt;</span></pre></div>
              </div>
              </div>
              
              <p>Then, our <code>$http</code> call will update this with current weather conditions:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>angular.module(<span class="string"><span class="delimiter">'</span><span class="content">ionicApp</span><span class="delimiter">'</span></span>, [])&#x000A;&#x000A;.controller(<span class="string"><span class="delimiter">'</span><span class="content">MainCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, <span class="predefined">$http</span>) {&#x000A;  <span class="predefined">$http</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">http://echo.jsontest.com/conditions/frightful</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>(resp) {&#x000A;    <span class="predefined">$scope</span>.conditions = resp.data.conditions;&#x000A;  }, <span class="keyword">function</span>(err) {&#x000A;    console.error(<span class="string"><span class="delimiter">'</span><span class="content">ERR</span><span class="delimiter">'</span></span>, err);&#x000A;    <span class="comment">// err.status will contain the status code</span>&#x000A;  })&#x000A;});</pre></div>
              </div>
              </div>
              
              <p>In the example above we are using a simple JSON echo server for testing purposes, it just returns whatever JSON you want which can be useful for testing across the network.</p>
              
              <p>In future formulas we will see how to do local testing of backend resources using AngularJS Mocks.</p>
              
              <h3 id="ngresource">ngResource</h3>
              
              <p>Often our backend data is modelled in a way that naturally fits into the client-side data models in our app. For example, if our app has a list of <code>Posts</code> that we show in a stream, a <code>Post</code> model becomes a core data element on both the server <em>and</em> the client.</p>
              
              <p>Additionally, backend services that work on individual models like this often implement a RESTful API where we can easily create, read, update, and delete individual items, or grab lists of items.</p>
              
              <p>For the sake of this example, let’s assume we have an API for posts. This API has a few endpoints supporting some common HTTP verbs:</p>
              
              <pre><code>GET /api/post - Lists all posts&#x000A;POST /api/post - Creates a new Post&#x000A;GET /api/post/:id - Returns the data for that specific post with the id of :id&#x000A;PUT /api/post/:id - Updates the information for a specific post&#x000A;DELETE /api/post/:id - Deletes the specific post&#x000A;</code></pre>
              
              <p>This style of API is a perfect use case for the built-in <code>ngResource</code> module in Angular. With <code>ngResource</code>, we can easily wrap this API and interact with it:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>angular.module(<span class="string"><span class="delimiter">'</span><span class="content">ionicApp</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">ngResource</span><span class="delimiter">'</span></span>])&#x000A;&#x000A;.factory(<span class="string"><span class="delimiter">'</span><span class="content">Post</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$resource</span>) {&#x000A;  <span class="keyword">return</span> <span class="predefined">$resource</span>(<span class="string"><span class="delimiter">'</span><span class="content">/api/post</span><span class="delimiter">'</span></span>);&#x000A;});</pre></div>
              </div>
              </div>
              
              <p>In the example above, we are now importing the <code>ngResource</code> module. You’ll also need to include the <code>angular-resource.js</code> script include.</p>
              
              <p>Notice we’ve also opted for an Angular Factory. This makes using a <code>Post</code> easy in our code, and we can treat it as a natural data model:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>angular.module(<span class="string"><span class="delimiter">'</span><span class="content">ionicApp</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">ionic</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">ngResource</span><span class="delimiter">'</span></span>])&#x000A;&#x000A;.factory(<span class="string"><span class="delimiter">'</span><span class="content">Post</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$resource</span>) {&#x000A;  <span class="keyword">return</span> <span class="predefined">$resource</span>(<span class="string"><span class="delimiter">'</span><span class="content">/api/post/:id</span><span class="delimiter">'</span></span>);&#x000A;})&#x000A;&#x000A;.controller(<span class="string"><span class="delimiter">'</span><span class="content">MainCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, Post) {&#x000A;  <span class="comment">// Get all posts</span>&#x000A;  <span class="predefined">$scope</span>.posts = Post.query();&#x000A;&#x000A;  <span class="comment">// Our form data for creating a new post with ng-model</span>&#x000A;  <span class="predefined">$scope</span>.postData = {};&#x000A;  <span class="predefined">$scope</span>.<span class="function">newPost</span> = <span class="keyword">function</span>() {&#x000A;    <span class="keyword">var</span> post = <span class="keyword">new</span> Post(<span class="predefined">$scope</span>.postData);&#x000A;    post.<span class="predefined">$save</span>();&#x000A;  }&#x000A;});</pre></div>
              </div>
              </div>
              
              <p>And then we can easily have a form for creating new posts:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre><span class="tag">&lt;body</span> <span class="attribute-name">ng-app</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ionicApp</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MainCtrl</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;  <span class="tag">&lt;ion-content</span> <span class="attribute-name">padding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;    <span class="tag">&lt;form</span> <span class="attribute-name">ng-submit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">newPost()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>&#x000A;      <span class="tag">&lt;label&gt;</span>New Post:<span class="tag">&lt;/label&gt;</span>&#x000A;      <span class="tag">&lt;textarea</span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">postData.text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/textarea&gt;</span>&#x000A;      <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">button button-positive button-block</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Create<span class="tag">&lt;/button&gt;</span>&#x000A;    <span class="tag">&lt;/form&gt;</span>&#x000A;  <span class="tag">&lt;/ion-content&gt;</span>&#x000A;<span class="tag">&lt;/body&gt;</span></pre></div>
              </div>
              </div>
              
              <p>When the user submits this form, the <code>newPost()</code> function is called, creating a new instance of our <code>Post</code> resource, and then calling <code>$save()</code> which does an HTTP <code>POST</code> to <code>/api/post</code>. </p>
              
              <p>To work correctly, our server should return a response similar to this:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>{&#x000A;  <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">I just ate a pickle</span><span class="delimiter">&quot;</span></span>,&#x000A;  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>&#x000A;}</pre></div>
              </div>
              </div>
              
              <p>ngResource is a powerful module and has a lot of fun functionality. Be sure to take a look at the official <a href="https://docs.angularjs.org/api/ngResource/service/$resource">ngResource</a> docs for more info. </p>
              
              <h3 id="summary">Summary</h3>
              
              <p>Interacting with backend data is crucial for most mobile apps, and with AngularJS it’s a breeze. For simple backend interactions, the <code>$http</code> module lets us do simple HTTP calls to an API end point.</p>
              
              <p>For more complicated API interaction, especially when interacting with a RESTful API, <code>ngResource</code> provides a lot of abstractions over common API interactions.</p>
              
              <p>When in doubt, <code>$http</code> can be used for small, one-off HTTP requests, and <code>ngResource</code> and the <code>$resource</code> service should be used for all API interactions that act on real data models.</p>
              
              <p>Take a look at the simple code in the scratchpad below for an example of using <code>ngResource</code> and the <code>$resource</code> service:</p>
              <section class='scratchpad'>
                <p>Try this tutorial out below in the Scratchpad:</p>
                <div id='scratch'></div>
              </section>
              <footer>
                <h6>further reading</h6>
                <div class='similar-items list'>
                  <div class='item-row'>
                    <div class='similar-item'>
                      <a href='/formulas/localstorage/'>Using Local Storage</a>
                      <p>Mobile apps require seamless online and offline functionality, in large part due to the reliability of current mobile networks, and to reduce network requests that take time and hurt battery life. Learn how to use Local Storage to persist data for fast and reliable offline access.</p>
                    </div>
                  </div>
                </div>
              </footer>
            </article>
          </div>
        </div>
      </div>
      <footer class='main'>
        <span class='attribution'>&copy; 2014 Drifty Co.</span>
        <span class='expand-wrapper'>
          <span class='expand'></span>
        </span>
        <nav id='nav'>
          <a href='https://ionicframework.com' target='_blank'>Ionic</a>
          <a href='https://github.com/driftyco/ionic' target='_blank'>Github</a>
          <a href='mailto:hi@ionicframework.com' target='_blank'>Contact us</a>
          <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_blank'>Suggestions</a>
          <a href='http://ionicons.com/' target='_blank'>Ionicons</a>
          <a href='http://ionicframework.com/jobs/' target='_blank'>Jobs</a>
          <a href='http://forum.ionicframework.com/' target='_blank'>Forum</a>
          <a href='http://ionicframework.com/blog/' target='_blank'>Blog</a>
          <a href='http://drifty.com' target='_blank'>Drifty Co</a>
        </nav>
      </footer>
    </div>
    <div class='get-ionic-wrapper viewed'>
      <a class='get-ionic' href='http://www.ionicframework.com' target='_new'>Get building with Ionic today!</a>
      <a class='close-cta ion-ios7-close-empty' href='#'></a>
    </div>
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js'></script>
    <script src='//scratch.ionicsdk.com/static/js/embed.js'></script>
      <script>
        $(function() {
          var getTemplate = function(url) {
            return $.ajax({url: location.pathname + '/' + url, dataType: 'text'})
          }
        
          $.when(getTemplate('template.html'), getTemplate('style.css'), getTemplate('script.js')).then(function(html, css, js) {
            var scratch = new IonicScratch({
              el: document.getElementById('scratch'),
              width: '100%',
              height: '600px',
              html: html[0],
              css: css[0],
              js: js[0]
            });
          })
        })
      </script>
    <script src='/js/main.js'></script>
  </body>
</html>
