<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta charset='utf-8'>
    <title>Formulas | Learn Ionic</title>
    <link href='/css/site.css' rel='stylesheet'>
    <link href='//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.0/animate.min.css' rel='stylesheet'>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44023830-6', 'ionicframework.com');
      ga('send', 'pageview');
    </script>
  </head>
  <body class='full-page no-js'>
    <script>
      document.body.classList.remove('no-js');
    </script>
    <div class='container'>
      <div class='row'>
        <div class='side-nav'>
          <div class='logo'>
            <a href='/'>
              <img alt='Learn Ionic Framework' height='43' src='/img/learn-ionicframework@2x.png' width='194'>
            </a>
          </div>
          <nav>
            <ul>
              <li>
                <a href='/videos/'>
                  <i class='ion-videos'></i>
                  <p>Videos</p>
                </a>
              </li>
              <li>
                <a class='active' href='/formulas/'>
                  <i class='ion-formulas'></i>
                  <p>Formulas</p>
                </a>
              </li>
              <li>
                <a href='/resources/'>
                  <i class='ion-resources'></i>
                  <p>Resources</p>
                </a>
              </li>
            </ul>
            <footer>
              <ul>
                <li>
                  <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_new'>
                    <i class='ion-suggestions'></i>
                    <p>Suggest a Topic</p>
                  </a>
                </li>
                <li>
                  <a href='http://forum.ionicframework.com/' target='_new'>
                    <i class='ion-forum'></i>
                    <p>Forums</p>
                  </a>
                </li>
                <li>
                  <a href='https://github.com/driftyco/ionic' target='_new'>
                    <i class='ion-github'></i>
                    <p>Github</p>
                  </a>
                </li>
                <li>
                  <a href='https://twitter.com/ionicframework' target='_new'>
                    <i class='ion-twitter'></i>
                    <p>Twitter</p>
                  </a>
                </li>
                <li>
                  <a href='https://plus.google.com/+Ionicframework/posts' target='_new'>
                    <i class='ion-googleplus'></i>
                    <p>Plus</p>
                  </a>
                </li>
              </ul>
            </footer>
          </nav>
        </div>
        <div class='main-pane'>
          <div class='content formula'>
            <nav>
              <a class='left' href='/formulas/'>
                <i class='ion-chevron-left'></i>
                <span style='margin-left:-5px;'>All Formulas</span>
              </a>
            </nav>
            <article>
              <header>
                <h1>Using the Cordova Camera API</h1>
                <div class='byline'>
                  <img src='/img/authors/max-lynch.png'>
                  <span class='author'>
                    Written by
                    <a href='https://twitter.com/maxlynch' target='_new'>Max Lynch</a>
                  </span>
                  <time></time>
                </div>
              </header>
              <p>Many apps use the functionality of the userâ€™s camera to add photo and video support to their apps. Adding media support to your app with the <a href="http://plugins.cordova.io/#/package/org.apache.cordova.camera">Cordova Camera API</a> is a snap (yea, I just went there):</p>
              
              <h2 id="plugin">Plugin</h2>
              
              <p>First, before we access the camera we need to install the Camera plugin. </p>
              
              <p>From the command line, <code>cd</code> into the directory for your current Ionic or Cordova app:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>$ cd myApp&#x000A;$ ls -l&#x000A;total 40&#x000A;-rw-rw-r--   1 driftyadmin  staff  2024 Apr 29 10:59 README.md&#x000A;-rw-rw-r--   1 driftyadmin  staff   810 Apr 29 10:59 config.xml&#x000A;-rw-rw-r--   1 driftyadmin  staff   620 Apr 29 10:59 gulpfile.js&#x000A;drwxrwxr-x   4 driftyadmin  staff   136 Apr 29 10:59 hooks&#x000A;-rw-rw-r--   1 driftyadmin  staff    74 Apr 29 10:59 ionic.project&#x000A;-rw-rw-r--   1 driftyadmin  staff   253 Apr 29 10:59 package.json&#x000A;drwxrwxr-x   3 driftyadmin  staff   102 Apr 30 09:46 platforms&#x000A;drwxrwxr-x   5 driftyadmin  staff   170 Apr 29 10:59 plugins&#x000A;drwxrwxr-x  11 driftyadmin  staff   374 Apr 29 10:59 www&#x000A;driftyadmin@drifty:~/test/myApp$</pre></div>
              </div>
              </div>
              
              <p>You will see something different probably, but the above output is what the root directory of an Ionic/Cordova app looks like.</p>
              
              <p>To install the plugin, run:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>$ cordova plugin add org.apache.cordova.camera</pre></div>
              </div>
              </div>
              
              <p>This will install the Camera plugin and we can get down to adding Camera functionality to our app!</p>
              
              <h2 id="taking-pictures">Taking pictures</h2>
              
              <p>Now that we have the plugin installed, we can use the camera API from our Javascript:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>&#x000A;<span class="keyword">function</span> <span class="function">takePicture</span>() {&#x000A;  navigator.camera.getPicture(<span class="keyword">function</span>(imageURI) {&#x000A;&#x000A;    <span class="comment">// imageURI is the URL of the image that we can use for</span>&#x000A;    <span class="comment">// an &lt;img&gt; element or backgroundImage.</span>&#x000A;&#x000A;  }, <span class="keyword">function</span>(err) {&#x000A;&#x000A;    <span class="comment">// Ruh-roh, something bad happened</span>&#x000A;&#x000A;  }, cameraOptions);&#x000A;</pre></div>
              </div>
              </div>
              
              <p>This will prompt the user to take a photo, and will return the local URL of the image that you can then use inside of an <code>&lt;img&gt;</code> tag or use for a CSS background image.</p>
              
              <p><code>cameraOptions</code> is an optional object that allows you to configure many aspects of the camera operation. They are too numerous to list here, so be sure to take a look at the <a href="https://github.com/apache/cordova-plugin-camera/blob/master/doc/index.md">Camera Plugin Docs</a> for a full list of the available features and options of the Camera plugin.</p>
              
              <h2 id="angularjs-service">AngularJS Service</h2>
              
              <p>What would a plugin be without an easy-to-use AngularJS service? Use the code below for a simple wrapper over the Camera plugin that makes it easy to asynchronously grab photos:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>module.factory(<span class="string"><span class="delimiter">'</span><span class="content">Camera</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">$q</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$q</span>) {&#x000A;&#x000A;  <span class="keyword">return</span> {&#x000A;    <span class="function">getPicture</span>: <span class="keyword">function</span>(options) {&#x000A;      <span class="keyword">var</span> q = <span class="predefined">$q</span>.defer();&#x000A;&#x000A;      navigator.camera.getPicture(<span class="keyword">function</span>(result) {&#x000A;        <span class="comment">// Do any magic you need</span>&#x000A;        q.resolve(result);&#x000A;      }, <span class="keyword">function</span>(err) {&#x000A;        q.reject(err);&#x000A;      }, options);&#x000A;&#x000A;      <span class="keyword">return</span> q.promise;&#x000A;    }&#x000A;  }&#x000A;}]);</pre></div>
              </div>
              </div>
              
              <p>This factory can be used in your controllers like this:</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>.controller(<span class="string"><span class="delimiter">'</span><span class="content">MyCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, Camera) {&#x000A;&#x000A;  <span class="predefined">$scope</span>.<span class="function">getPhoto</span> = <span class="keyword">function</span>() {&#x000A;    Camera.getPicture().then(<span class="keyword">function</span>(imageURI) {&#x000A;      console.log(imageURI);&#x000A;    }, <span class="keyword">function</span>(err) {&#x000A;      console.err(err);&#x000A;    });&#x000A;  };&#x000A;</pre></div>
              </div>
              </div>
              
              <p>Which will open the Camera when <code>getPhoto()</code> is called (from a button click, for example).</p>
              
              <h2 id="angularjs-whitelisting">AngularJS Whitelisting</h2>
              
              <p>Depending on how you request the data back from the Camera and use it in your Angular markup, you may have to whitelist image URLs so Angular allows <code>file://</code> URLs (for example, if you are using <code>ng-src</code> for an <code>&lt;img&gt;</code> tag):</p>
              
              <div><div class="CodeRay">
                <div class="code"><pre>module.config(<span class="keyword">function</span>(<span class="predefined">$compileProvider</span>){&#x000A;  <span class="predefined">$compileProvider</span>.imgSrcSanitizationWhitelist(<span class="regexp"><span class="delimiter">/</span><span class="content">^</span><span class="char">\s</span><span class="content">*(https?|ftp|mailto|file|tel):</span><span class="delimiter">/</span></span>);&#x000A;})</pre></div>
              </div>
              </div>
              
              <h2 id="example-project">Example Project</h2>
              
              <p>For a quick example that ties all of the lessons here together, take a look at the <a href="https://github.com/driftyco/ionic-example-cordova-camera">Cordova Camera</a> example app using Ionic! Hereâ€™s a screenshot of it in action:</p>
              
              <p><img src="/img/formulas/camera/photo.png" class="screenshot" /></p>
            </article>
          </div>
        </div>
      </div>
      <footer class='main'>
        <span class='attribution'>&copy; 2014 Drifty Co.</span>
        <span class='expand-wrapper'>
          <span class='expand'></span>
        </span>
        <nav id='nav'>
          <a href='https://ionicframework.com' target='_blank'>Ionic</a>
          <a href='https://github.com/driftyco/ionic' target='_blank'>Github</a>
          <a href='mailto:hi@ionicframework.com' target='_blank'>Contact us</a>
          <a href='https://github.com/driftyco/ionic-learn/issues/new' target='_blank'>Suggestions</a>
          <a href='http://ionicons.com/' target='_blank'>Ionicons</a>
          <a href='http://ionicframework.com/jobs/' target='_blank'>Jobs</a>
          <a href='http://forum.ionicframework.com/' target='_blank'>Forum</a>
          <a href='http://ionicframework.com/blog/' target='_blank'>Blog</a>
          <a href='http://drifty.com' target='_blank'>Drifty Co</a>
        </nav>
      </footer>
    </div>
    <div class='get-ionic-wrapper viewed'>
      <a class='get-ionic' href='http://www.ionicframework.com' target='_new'>Get building with Ionic today!</a>
      <a class='close-cta ion-ios7-close-empty' href='#'></a>
    </div>
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js'></script>
    <script src='//scratch.ionicsdk.com/static/js/embed.js'></script>
    <script src='/js/main.js'></script>
  </body>
</html>
